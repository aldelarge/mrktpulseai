{% block styles %}
<style>
    .snapshot {
        position: relative;
        text-align: left;
        color: #f8f9fa;
        font-size: 0.95rem;
        line-height: 1.5;
    }
    
  
    .snapshot p {
      color: white !important; /* you forgot the # */
    }
    .text-glow-green {
        /* color: #00ff00 !important; */
        text-shadow: 0 0 12px rgba(0, 255, 0, 0.5);
    }
    .text-soft-glow {
    color: #adb1bb;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.08);
    }

    .text-purple-soft-glow {
    color: #a78bfa;
    text-shadow: 0 0 4px rgba(167, 139, 250, 0.12);
    }
  </style>
{% endblock %}

{% extends "base.html" %}

{% block content %}
        <div class="container-fluid">

            <!-- Hero Section: AI-powered and Stock Insights -->
            <div class="row justify-content-center text-center hero-section fullpage">
                <div class="col-md-8">
                    <h1 class="hero-title text-glow-green">
                        Stop Trading Blind. <br>
                        Use AI.
                    </h1>

                    <p class="lead hero-description mt-3">
                        Forget the noise. Our AI scans <strong>news, momentum, and sentiment</strong> for your stocks. Get a simple breakdown every day after market close — straight to the point.
                    </p>
                    <a class="btn cta-button" href="{{ url_for('routes.signup') }}">
                        Get My AI Insights
                    </a>

                    <p class="text-muted mt-3">
                        Personalized for your stocks. Delivered at market close.
                    </p>
                </div>
            </div>

                
                <!-- Scroll Arrow -->
                <div class="scroll-arrow">
                    <i class="fas fa-arrow-down"></i>
                </div>
            </div>
        </div>
        <br>
        <!-- Personalized AI Stock Snapshot -->
        <div class="container fullpage mt-5">
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <div class="styled-div overlay_blur text-center p-5 mb-4 rounded">
                        <h2 class="text-glow-green"><i>Your Stocks. Real AI Insights.</i></h2>
                        <p class="lead text-light">
                            Every day at market close, get a quick, actionable summary powered by real-time data and AI.
                        </p>
                        <p class="text-soft-glow">
                            Your AI co-pilot will track your stocks and deliver relevant updates — no fluff, just the data you need.
                        </p>
                        <hr class="divider3">
                
                        <div class="row g-4 align-items-start mt-4">
                            <!-- AAPL Snapshot -->
                            <div class="col-md-6 mb-4 mb-md-0">
                                <div class="overlay_blur2 p-4 rounded-4 h-100">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h5 class="text-success fw-bold mb-0" id="snapshot-aapl-symbol">Loading...</h5>
                                        <p class="text-light mb-0 small" id="snapshot-aapl-price"></p>
                                    </div>
                                    <hr class="my-2" style="border-color: rgba(255,255,255,0.15);">
                                    <div id="snapshot-aapl-summary" class="pt-2">
                                        <p class="text-soft-glow small snapshot">Fetching analysis...</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- NVDA Snapshot -->
                            <div class="col-md-6">
                                <div class="overlay_blur2 p-4 rounded-4 h-100">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h5 class="text-success fw-bold mb-0" id="snapshot-nvda-symbol">Loading...</h5>
                                        <p class="text-light mb-0 small" id="snapshot-nvda-price"></p>
                                    </div>
                                    <hr class="my-2" style="border-color: rgba(255,255,255,0.15);">
                                    <div id="snapshot-nvda-summary" class="pt-2">
                                        <p class="text-soft-glow small snapshot">Fetching analysis...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="container">
            <div class="container fullpage">
                <div class="row justify-content-center text-center">
                    <div class="container mt-5 text-center">
                        <h2 class="text-glow-green"><i>Traditional Analysis Misses the Mark</i></h2>
                        <p class="lead">
                            Analysts can’t catch everything. AI finds the insights that matter.
                        </p>
                        <p class="text-soft-glow">
                            Real-time data. No noise. Just actionable insights.
                        </p>
                    </div>
            
                <!-- AI Has No Bias -->
            <!-- AI Has No Bias -->
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="styled-div overlay_blur p-5 mb-1 rounded d-flex flex-md-row flex-column align-items-center text-md-start text-center">
                        <div class="icon-box me-md-4 mb-3 mb-md-0">
                            <i class="fas fa-robot fa-3x feature-icon"></i>
                        </div>
                        <div>
                            <h3><i>No Bias. No Hype. Just Data.</i></h3>
                            <hr class="divider3 mobile-divider">
                            <p class="text-soft-glow">
                                Analysts have opinions. AI delivers real-time facts. We track market news, stock movements, and sentiment shifts — without bias or distractions.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Speed & Scale -->
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="styled-div overlay_blur p-5 mb-1 rounded d-flex flex-md-row flex-column align-items-center text-md-start text-center">
                        <div class="icon-box me-md-4 mb-3 mb-md-0">
                            <i class="fas fa-chart-bar fa-3x feature-icon"></i>
                        </div>
                        <div>
                            <h3><i>Stay Ahead of the Market.</i></h3>
                            <hr class="divider3 mobile-divider">
                            <p class="text-soft-glow">
                                AI processes real-time data and detects trends immediately, so you stay ahead. No more reacting after the fact.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Designed for Investors -->
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="styled-div overlay_blur p-5 mb-1 rounded d-flex flex-md-row flex-column align-items-center text-md-start text-center">
                        <div class="icon-box me-md-4 mb-3 mb-md-0">
                            <i class="fas fa-eye fa-3x feature-icon"></i>
                        </div>
                        <div>
                            <h3><i>Actionable Insights, Not Clicks.</i></h3>
                            <hr class="divider3 mobile-divider">
                            <p class="text-soft-glow">
                                We deliver clear, actionable insights, not sensationalism. Focus on data that helps you make smarter decisions.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            </div>
            <br>
            <div class="row justify-content-center fullpage">
                <div class="col-md-6 text-center">
                    <h3 class="text-white"><i>Get Your Free Market Recap</i></h3>
                    <p class="lead text-light">
                        Receive a concise, AI-powered market recap every day at market close. No credit card required.
                    </p>
                    <a href="{{ url_for('routes.signup') }}" class="btn btn-primary btn-lg mt-3">Get My Free Recap</a>
                    <p class="text-muted mt-3">No card required. Just sign up and stay informed.</p>
                </div>
            </div>
            <br>
        </div>
        <br>
        <!-- How It Works Section: Process Explanation -->
        <div class="fullpage">
            <div class="row justify-content-center text-center mt-5">
                <div class="col-md-10">
                    <h2 class="mb-4 text-glow-green">
                        <i>How It Works</i>
                    </h2>
                    <p class="text-soft-glow">
                        Our AI system constantly analyzes the market, giving you real-time insights and data that matter. From tracking news and sentiment to detecting market movements, we break it all down into actionable information you can use right now.
                    </p>
                </div>
            </div>
            <br>
            <div class="row text-center">
                <div class="col-md-4 mb-4">
                    <div class="feature-card over">
                        <i class="fas fa-stream fa-4x feature-icon"></i>
                        <h3 class="border-bottom card_title text-glow-green">Collecting Data</h3>
                        <p class="text-soft-glow">
                            We pull in high-quality, real-time data from multiple sources — breaking news, stock performance, sentiment analysis, and more. This gives us the full picture of the market, so you don’t have to chase it.
                        </p>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="feature-card">
                        <i class="fas fa-cogs fa-4x feature-icon"></i>
                        <h3 class="border-bottom card_title text-glow-green">AI Processing</h3>
                        <p class="text-soft-glow">
                            The AI takes all the data, filters out the noise, and identifies the trends that matter — instantly. It’s fast, focused, and gets straight to the insights you need to make informed decisions.
                        </p>                    
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="feature-card">
                        <i class="fas fa-lightbulb fa-4x feature-icon"></i>
                        <h3 class="border-bottom card_title text-glow-green">Actionable Insights</h3>
                        <p class="text-soft-glow">
                            The insights are delivered straight to you. Clear, simple, and ready to act on. Whether it’s tracking stocks or catching trends before they blow up, our AI makes sure you have the edge you need.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <br>
        <!-- Call to Action -->
        <div class="row justify-content-center fullpage">
            <div class="col-md-6 text-center">
                <h3 class="text-white"><i>Stay Ahead of the Market</i></h3>
                <p class="lead light-gray-text">
                    Every weekday at market close, get a concise market recap—so you're always prepared for the next session.
                </p>

                <div class="styled-div overlay_blur p-4 mb-4 rounded">
                    <h4 class="text-white">What You Get:</h4>
                    <ul class="trust-points text-center">
                        <li><i class="fas fa-check-circle"></i> A data-driven newsletter, delivered daily</li>
                        <li><i class="fas fa-check-circle"></i> Key takeaways from earnings, trends, and news</li>
                        <li><i class="fas fa-check-circle"></i> Market insights without the noise</li>
                    </ul>
                    <a href="{{ url_for('routes.signup') }}" class="btn btn-primary btn-lg mt-3">Get Instant Access</a>
                    <p class="text-muted mt-3">Secure checkout • Just $9.99/month • Cancel anytime</p>
                </div>

            </div>
        </div>
    </div>
    <script>
        function fetchSnapshot(symbol, prefix) {
            fetch(`/landing_snapshot/${symbol}`)
                .then(res => res.json())
                .then(data => {
                const priceHtml = `${data.price} <span class="${data.change_percent.startsWith('+') ? 'text-success' : 'text-danger'}">(${data.change_percent})</span>`;
                document.getElementById(`${prefix}-symbol`).innerText = `${data.symbol} Snapshot`;
                document.getElementById(`${prefix}-price`).innerHTML = priceHtml;

                const summaryText = truncateMiddle(data.summary_text, 100, 65); // starts 100 words in, shows 50 words
                const summaryDiv = document.getElementById(`${prefix}-summary`);
                summaryDiv.innerHTML = `<div class="snapshot">${summaryText}</div>`;


                // ✅ Force style override to fix markdown-injected CSS
                const injectedTags = summaryDiv.querySelectorAll('*');
                injectedTags.forEach(tag => {
                    tag.style.color = '#f8f9fa';
                    tag.style.fontSize = '0.9rem';
                    tag.style.lineHeight = '1.5';
                });
                })
                .catch(error => {
                document.getElementById(`${prefix}-summary`).innerHTML = `<p class="text-danger small">⚠️ Failed to load snapshot.</p>`;
                console.error(`Snapshot error for ${symbol}:`, error);
                });
            }

        // ✅ Helper to cut after N words
            function truncateMiddle(str, startWord = 100, wordLimit = 50) {
            const words = str.split(' ');

            // If it's too short, just return from the beginning
            if (words.length <= startWord + wordLimit) {
                return words.slice(0, wordLimit).join(' ') + '...';
            }

            return '... ' + words.slice(startWord, startWord + wordLimit).join(' ') + ' ...';
        }
        // Call it like this:
        fetchSnapshot("AAPL", "snapshot-aapl");
        fetchSnapshot("NVDA", "snapshot-nvda");
        </script>
{% endblock %}
